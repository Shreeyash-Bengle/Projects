<div class="container">
  <h2 class="form-title">
    <mat-icon class="form-icon">business</mat-icon>
    <div class="heading">Consignee Details</div>
  </h2>
</div>

<form
  class="consignee-form mat-elevation-z4"
  #consigneeForm="ngForm"
  autocomplete="off"
>
  <div class="form-grid">
    <mat-form-field appearance="outline">
      <mat-label>Consignee Name</mat-label>
      <input
        matInput
        name="consigneeName"
        [(ngModel)]="consignee.name"
        required
      />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>GSTIN</mat-label>
      <input matInput name="gstin" [(ngModel)]="consignee.gstin" required />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Pan No</mat-label>
      <input matInput name="pan_no" [(ngModel)]="consignee.pan_no" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Contact No 1</mat-label>
      <input matInput name="contact_no1" [(ngModel)]="consignee.contact_no1" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Contact No 2</mat-label>
      <input matInput name="contact_no2" [(ngModel)]="consignee.contact_no2" />
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Address</mat-label>
      <textarea
        matInput
        name="address"
        [(ngModel)]="consignee.address"
        rows="3"
      ></textarea>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Country</mat-label>
      <input matInput name="country" [(ngModel)]="consignee.country" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>State</mat-label>
      <input matInput name="state" [(ngModel)]="consignee.state" />
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>State Code</mat-label>
      <input matInput name="state_code" [(ngModel)]="consignee.state_code" />
    </mat-form-field>
  </div>

  <mat-form-field appearance="outline">
    <mat-label>City</mat-label>
    <input matInput name="city" [(ngModel)]="consignee.city" />
  </mat-form-field>

  <div class="form-actions">
    <button
      mat-raised-button
      color="primary"
      type="button"
      [disabled]="!consigneeForm.form.valid"
      (click)="addConsignee()"
    >
      <mat-icon class="save-btn">{{
        editingIndex !== null ? "edit" : "save"
      }}</mat-icon>
      {{ editingIndex !== null ? "Update Consignee" : "Save Consignee" }}
    </button>
    <button
      *ngIf="editingIndex !== null"
      mat-button
      type="button"
      (click)="resetForm()"
      style="margin-left: 8px"
    >
      Cancel
    </button>
  </div>
</form>

<h2>
  <mat-icon>business</mat-icon>
  <div>Consignee List</div>
</h2>

<div class="mat-elevation-z4" style="margin-top: 2rem">
  <table mat-table [dataSource]="dataSource" class="full-width-table">
    <!-- Consignee Name Column -->
    <ng-container matColumnDef="name">
      <th mat-header-cell *matHeaderCellDef>Consignee Name</th>
      <td mat-cell *matCellDef="let element">{{ element.name }}</td>
    </ng-container>

    <!-- Address Column -->
    <ng-container matColumnDef="address">
      <th mat-header-cell *matHeaderCellDef>Address</th>
      <td mat-cell *matCellDef="let element">{{ element.address }}</td>
    </ng-container>

    <!-- GSTIN Column -->
    <ng-container matColumnDef="gstin">
      <th mat-header-cell *matHeaderCellDef>GSTIN</th>
      <td mat-cell *matCellDef="let element">{{ element.gstin }}</td>
    </ng-container>

    <!-- Pan No Column -->
    <ng-container matColumnDef="pan_no">
      <th mat-header-cell *matHeaderCellDef>PAN No</th>
      <td mat-cell *matCellDef="let element">{{ element.pan_no }}</td>
    </ng-container>

    <!-- Contact No 1 Column -->
    <ng-container matColumnDef="contact_no1">
      <th mat-header-cell *matHeaderCellDef>Contact No 1</th>
      <td mat-cell *matCellDef="let element">{{ element.contact_no1 }}</td>
    </ng-container>

    <!-- Contact No 2 Column -->
    <ng-container matColumnDef="contact_no2">
      <th mat-header-cell *matHeaderCellDef>Contact No 2</th>
      <td mat-cell *matCellDef="let element">{{ element.contact_no2 }}</td>
    </ng-container>

    <!-- Country Column -->
    <ng-container matColumnDef="country">
      <th mat-header-cell *matHeaderCellDef>Country</th>
      <td mat-cell *matCellDef="let element">{{ element.country }}</td>
    </ng-container>

    <!-- State Column -->
    <ng-container matColumnDef="state">
      <th mat-header-cell *matHeaderCellDef>State</th>
      <td mat-cell *matCellDef="let element">{{ element.state }}</td>
    </ng-container>

    <!-- State Code Column -->
    <ng-container matColumnDef="state_code">
      <th mat-header-cell *matHeaderCellDef>State Code</th>
      <td mat-cell *matCellDef="let element">{{ element.state_code }}</td>
    </ng-container>

    <!-- City Column -->
    <ng-container matColumnDef="city">
      <th mat-header-cell *matHeaderCellDef>City</th>
      <td mat-cell *matCellDef="let element">{{ element.city }}</td>
    </ng-container>

    <!-- Actions Column -->
    <ng-container matColumnDef="actions">
      <th mat-header-cell *matHeaderCellDef>Actions</th>
      <td mat-cell *matCellDef="let element">
        <button
          mat-icon-button
          color="primary"
          (click)="editConsignee(element)"
        >
          <mat-icon class="edit">edit</mat-icon>
        </button>
        <button mat-icon-button color="warn" (click)="deleteConsignee(element)">
          <mat-icon class="delete">delete</mat-icon>
        </button>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>

  <mat-paginator
    [pageSize]="5"
    [pageSizeOptions]="[5, 10, 20]"
    showFirstLastButtons
  ></mat-paginator>
</div>
